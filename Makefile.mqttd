include Makefile

mqttd-help: build
	./bin/mqttd help
	./bin/mqttd help commands
	./bin/mqttd help version
	./bin/mqttd help help

mqttd-version: build
	./bin/mqttd version

mqttd-get-devices:
	mqtt publish --topic 'twystd/uhppoted/gateway/devices:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "nonce":      5 }}}'

mqttd-get-devices-hotp:
	mqtt publish --topic 'twystd/uhppoted/gateway/devices:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "hotp":       "586787" }}}'

mqttd-get-devices-rsa:
	mqtt publish --topic 'twystd/uhppoted/gateway/devices:get' \
                 --message '{ "message": { "signature": "VXLQgzQOHnjIFW6UFftWBYtdwluM3M7nbQD6fjLdSkuk/L8ahLfHsIEPCQF9ofkqEGaBG2Dl6QJtqYF825z8dLPsxbQA1bgMrdbpiVKiS09Vn4ubONIGmShQKcuoZuAzgsVeNbCsDW2MhSq/f6W/DUlKmD9PwgxMkzeKUCjM8bQ=",\
                                           "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "nonce":      8 }}}'

mqttd-get-devices-encrypted:
	mqtt publish --topic 'twystd/uhppoted/gateway/devices:get' \
                 --message '{ "message": { "key":       "djHAMoKIiCmhwdtMmhOw/7TkeTrzbYflZPXKbD5Atfc0Ocz42STbIAPi3zXotS36U+7cxJ7+CmTHet+qFEZmeGhZZqMEjy4tmGFwKcCSZFbRK8y2MAumPjKgMNoFy03hdVvTxHrrGlhUM20uEK17tlVsTgf2anP/ffsUC4QOFWUhWurb2QOj8llI+yQwFWVW8qSz2XekRsKl1bFAutcnHIO/2uTMNSOY1B6t6WmWdyH8xJJnnBF5q/nEnb5aIsKUGp47kNszxmSDHYwXLXpNz8v6hathm0Z7yGiYOg2jhfU33JIko61vQSP6SxNUg+fDZqy33MWemLSw9V8yINVTZQ==",\
                                           "iv":        "E008D4D92C951CF692BC49252BE3068E",\
                                           "signature": "VXLQgzQOHnjIFW6UFftWBYtdwluM3M7nbQD6fjLdSkuk/L8ahLfHsIEPCQF9ofkqEGaBG2Dl6QJtqYF825z8dLPsxbQA1bgMrdbpiVKiS09Vn4ubONIGmShQKcuoZuAzgsVeNbCsDW2MhSq/f6W/DUlKmD9PwgxMkzeKUCjM8bQ=",\
                                           "request":   "F3hk+O3ITub+/bEbY8K0DIvk7bJL+kNJYf/jnXkpCrUjnkTEqsmXfZMlwzAdun/A+kOjxKqamRiMLD6VLFiXAI8PMx9lhHhFasiLzpQweKIl/U75v+NeOGeEDLm2BxF1pIaHFakd3TsqfiabJq9sQ7a44vXkux8CxuLNtRDFC2a5UCfB1Xuo1BBoTZuT2hkcNGCzh5mE1nJZNQvHjn2vKsIYTT7Y/eGLKhhAiFLThC04M4OFVkbAuo6OsHlh+ka3k1CTQVChpw4UTn/QFvmrWCcQvqRoYg4BVbR1fZLetb9ra7BCE0ckObtiIPpxqn4dnN0fJMqCbG2GH8mFZKmr2HsgqbZ8XVTxNdy2aXLAIHb9F3plP/RrRPPDzUzf39wd" \
                                         }, \
                              "hmac": "774f8153b9c8f9e3304914f73a95f575f319b8836d40f46537fac4b1a340b3c1" }'
 
mqttd-get-device:
	mqtt publish --topic 'twystd/uhppoted/gateway/device:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "device-id":  405419896 }}}'

mqttd-get-device-hotp:
	mqtt publish --topic 'twystd/uhppoted/gateway/device:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "hotp":       "586787", \
                                                        "device-id":  405419896 }}}'

mqttd-get-device-rsa:
	mqtt publish --topic 'twystd/uhppoted/gateway/device:get' \
                 --message '{ "message": { "signature": "WyIfFnU4aGgtrxHVnzNUZT4lkt13Crm9CEw74ziH+80tXR+kp0/S4lU5hJiyTeTuLSWY2iUHmJ+fR30Xv46C0rbu/Mea3nm6Dr8PFXp3HcyMuNpLg4V3eTwE+gMMLj1rQkDLUFgTxDHv21nOd61bjIL0/I/5qyil0PtePPvKPJ4=",\
                                           "request": { "request-id":  "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "device-id":   405419896, \
                                                        "nonce":       8 }}}'

mqttd-get-device-encrypted:
	mqtt publish --topic 'twystd/uhppoted/gateway/device:get' \
                 --message '{ "message": { "key":       "V119LnAEoxO+DPZwvH+ALz0aI5L0NRIzXbkRAs+s6udqb+jqImyJ0ucweaTg8xAMDQz6eHXGbnAdQ3mPcwUuKWXJqtnuh4m0cefXWoTYomld/i7l0cqcBiwTyQa7sRcKh/1SjRpif6cLoaVftWoQUTaSekWPefOyS6WzmRPjnQuJnlk41KJFgG6bR93eZtB9zZk3ipUejawnOGE8ZmxRsxifYfg/P3cjTiuyF6SeZ+5lS/lpVl39IddnNmX0LjT3ALveIQlEpxo3Ik1f/jd5ymc3Kh911zhBnmxaZR6FFKF2d3kVUtGTYzRiSihzN9QPwbVvdzDfxq9pVRsGI4n5gQ==", \
                                           "iv":        "C6A42D4D3189BE7062A31AD7F7A58136",\
                                           "signature": "h6XjzE57y2E8k7MU8Slpgfi35ZiNpDfEiAFmwydA2C4L2WllK+qid8pred0dCXaMWzV7laeN3YQqwP4Ia6JZKwajYvFzWAa/hZSCXt26jpfSZyBwSVivCTwyAsJlvubhK5sOnvPpzQFYN2WbYU96rtv5qDJ339r27T3avGd4L4A=",\
                                           "request": { "request-id":  "AH173635G3", \
                                                        "client-id":   "QWERTY54", \
                                                        "reply-to":    "twystd/uhppoted/reply/97531", \
                                                        "device-id":   405419896, \
                                                        "nonce":       8 } \
                                         }, \
                              "hmac": "0bb6d42e35368ae106340e1d417c814f30482499c51478ca3550179bd1a641c2" }'

mqttd-get-status:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/status:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "device-id":  405419896 }}}'

mqttd-get-time:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/time:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "device-id":  405419896 }}}'

mqttd-set-time:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/time:set' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "device-id":  405419896, \
                                                        "date-time":  "$(DATETIME)" }}}'

mqttd-get-door-delay:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/door/delay:get' \
              --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                     "client-id":  "QWERTY54", \
                                                     "reply-to":   "twystd/uhppoted/reply/97531", \
                                                     "device-id":  405419896, \
                                                     "door":       3 }}}'

mqttd-set-door-delay:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/door/delay:set' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896, \
                                                      "door":       3, \
                                                      "delay":      8 }}}'

mqttd-get-door-control:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/door/control:get' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896, \
                                                        "door":       3 }}}'

mqttd-set-door-control:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/door/control:set' \
              --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                     "client-id":  "QWERTY54", \
                                                     "reply-to":   "twystd/uhppoted/reply/97531", \
                                                     "device-id":  405419896, \
                                                     "door":       3, \
                                                     "control":    "normally closed" }}}'

mqttd-get-cards:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/cards:get' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                       "client-id":  "QWERTY54", \
                                                       "reply-to":   "twystd/uhppoted/reply/97531", \
                                                       "device-id":  405419896 }}}'

mqttd-delete-cards:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/cards:delete' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896 }}}'

mqttd-get-card:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/card:get' \
                 --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                        "client-id":  "QWERTY54", \
                                                        "reply-to":   "twystd/uhppoted/reply/97531", \
                                                        "device-id":  405419896, \
                                                        "card-number": 65537 }}}'

mqttd-put-card:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/card:put' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896, \
                                                      "card": { "card-number": 1327679, \
                                                                "valid-from": "2019-11-01", \
                                                                "valid-until": "2019-12-31", \
                                                                "doors": [true,false,false,true] } \
                                                    }}}'

mqttd-delete-card:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/card:delete' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896, \
                                                      "card-number": 1327679 }}}'

mqttd-get-events:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/events:get' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896, \
                                                      "start":      "2019-08-05", \
                                                      "end":        "2019-08-09" }}}'

mqttd-get-event:
	mqtt publish --topic 'twystd/uhppoted/gateway/device/event:get' \
               --message '{ "message": { "request": { "request-id": "AH173635G3", \
                                                      "client-id":  "QWERTY54", \
                                                      "reply-to":   "twystd/uhppoted/reply/97531", \
                                                      "device-id":  405419896, \
                                                      "event-id": 50 }}}'
